<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>link - React-MVx</title>
    <meta name="description" content="MVVM Architecture Framework for React" />
    <meta name="author" content="Vlad Balin">
    <meta charset="UTF-8">
    <link rel="icon" href="../../themes/daux/img/favicon-navy.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../../themes/daux/css/theme-navy.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="with-float">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../../index.html">React-MVx</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../../Getting_Started.html">Getting Started</a></li><li class='Nav__item  has-children'><a href="../../Guides/Data_binding_and_forms.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Guides</a><ul class='Nav'><li class='Nav__item '><a href="../../Guides/Data_binding_and_forms.html">Data binding and forms</a></li><li class='Nav__item '><a href="../../Guides/Input_Validation.html">Input Validation</a></li><li class='Nav__item '><a href="../../Guides/Editable_Lists.html">Editable Lists</a></li><li class='Nav__item '><a href="../../Guides/Paging.html">Paging</a></li><li class='Nav__item '><a href="../../Guides/id-references_and_stores.html">id-references and stores</a></li><li class='Nav__item '><a href="../../Guides/Layered_application_state.html">Layered application state</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="../../API_Reference/Overview.html" class="folder"><i class="Nav__arrow">&nbsp;</i>API Reference</a><ul class='Nav'><li class='Nav__item '><a href="../../API_Reference/Overview.html">Overview</a></li><li class='Nav__item  has-children'><a href="../../API_Reference/Component_API/Overview.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Component API</a><ul class='Nav'><li class='Nav__item '><a href="../../API_Reference/Component_API/Overview.html">Overview</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/props.html">props</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/state.html">state</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/store.html">store</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/context.html">context</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/links.html">links</a></li><li class='Nav__item '><a href="../../API_Reference/Component_API/Rendering.html">Rendering</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="../../API_Reference/Link_API/link.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Link API</a><ul class='Nav'><li class='Nav__item Nav__item--active'><a href="../../API_Reference/Link_API/link.html">link</a></li></ul></li></ul></li><li class='Nav__item '><a href="../../Data-bound controls.html">Data-bound controls</a></li><li class='Nav__item '><a href="../../Examples.html">Examples</a></li><li class='Nav__item  has-children'><a href="../../includes/api.html" class="folder"><i class="Nav__arrow">&nbsp;</i>includes</a><ul class='Nav'><li class='Nav__item '><a href="../../includes/api.html">api</a></li><li class='Nav__item '><a href="../../includes/complex-state.html">complex-state</a></li><li class='Nav__item '><a href="../../includes/databinding.1.html">databinding.1</a></li><li class='Nav__item '><a href="../../includes/simple.html">simple</a></li></ul></li></ul>

            <div class="Links">
                                    <hr/>
                                            <a href="https://github.com/Volicon/React-MVx/issues" target="_blank">Help/Support/Bugs</a>
                        <br />
                                            <a href="http://volicon.com" target="_blank">Made by Volicon (a Verizon company)</a>
                        <br />
                                    
                                    <div class="CodeToggler">
                        <hr/>
                                                    <span class="CodeToggler__text">Code blocks</span>
                            <div class="ButtonGroup" role="group">
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--hide">No</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--below">Below</button>
                                <button class="Button Button--default Button--small CodeToggler__button CodeToggler__button--float">Inline</button>
                            </div>
                                            </div>
                
                                    <hr/>
                    <div class="Twitter">
                                                    <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=gaperton&amp;show_count=false"></iframe>
                            <br />
                            <br />
                                            </div>
                            </div>
        </div>
    </aside>
    <div class="Columns__right Columns__right--float">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1>link</h1>
                <span style="float: left; font-size: 10px; color: gray;">
            Friday, May 12, 2017 1:03 PM        </span>
                        <span style="float: right; font-size: 10px; color: gray;">
            <a href="https://github.com/Volicon/React-MVx/blob/develop/docs/02_API_Reference/03_Link_API/link.md" target="_blank">Edit on GitHub</a>
        </span>
            </div>


    <div class="s-content">
        <h1 id="page_Link+API">Link API</h1>
<pre><code class="language-javascript">// Data bound control for the semantic form markup
const Input = ({ valueLink, ...props }) =&gt; (
    &lt;div className={`form-control ${ valueLink.error ? 'error' : '' }`}&gt;
        &lt;input {...props}
            value={ valueLink.value }
            onChange={ e =&gt; valueLink.set( e.target.value ) }
        /&gt;
        &lt;div className=&quot;validation-error&quot;&gt;{ valueLink.error || '' }&lt;/div&gt;
    &lt;/div&gt;
);
</code></pre>
<p>Link is an intermediate object used to implement the two-way data binding.
It acts like a transport for the value, the callback to modify it, its validation error, abstracting out
UI controls from the data representation in the state container and from the state container per se.</p>
<p>Links to the record's attributes are commonly created with <code>linkAt</code> and <code>linkAll</code> methods of records.
Record is automatically validated upon the links creation, and link encloses the validation error
related to the particuler attribute.</p>
<p>Links makes it possible to create the semantic markup for the form elements, encapsulating the
all the required styles and validation error indication.</p>
<h2 id="page_Link%27s+structure">Link's structure</h2>
<pre><code class="language-javascript">// Link's shape
{
    value : /* the value */,
    set( newValue ){ /* the function to change it */},
    error : /* validation error */
}
</code></pre>
<p>Here are the most important link members.</p>
<h3 id="page_value">value</h3>
<p>Holds linked value. This value is immutable.</p>
<h3 id="page_error">error</h3>
<p>Holds the validation error (typically the text error message) which might be consumed and displayed by data-bound countrol.</p>
<h3 id="page_set%28+newValue+%29">set( newValue )</h3>
<pre><code class="language-javascript">&lt;button onClick={ () =&gt; boolLink.set( !boolLink.value ) } /&gt;
</code></pre>
<p>Tells the state container to update the value (<code>link.value</code> is not changed).</p>
<h3 id="page_update%28+prevValue+%3D%3E+newValue+%29">update( prevValue =&gt; newValue )</h3>
<pre><code class="language-javascript">&lt;button onClick={ () =&gt; boolLink.update( x =&gt; !x ) } /&gt;
</code></pre>
<p>Update link value using the given value transform function.</p>
<h2 id="page_Create+the+link">Create the link</h2>
<p>All records and collections may create links to its elements.
Component has the shorthand methods to create links to its state record elements.</p>
<p>You can create custom link object encapsulating complex data binding logic with <code>Link.value</code>.</p>
<h3 id="page_linkAt%28+key+%29">linkAt( key )</h3>
<pre><code class="language-javascript">const nameLink = user.linkAt( 'name' );
</code></pre>
<ul>
<li>
<code>record.linkAt( attr )</code> links the record's attribute. Semantically it's the reference to the attribute.</li>
<li>
<code>collection.linkAt( prop )</code> links the custom collection property. Property's setter <em>must</em> modify some record's attributes or change collections.</li>
<li>
<code>component.linkAt( key )</code> works similar to <code>component.state.linkAt( key )</code>.</li>
</ul>
<h3 id="page_linkAll%28%29">linkAll()</h3>
<pre><code class="language-javascript">// Link all attributes...
const { name, email, age } = user.linkAll();

// Link specified attributes...
const { name, email } = user.linkAll( 'name', 'email' );
</code></pre>
<ul>
<li>
<code>record.linkAll()</code> links all records attributes.</li>
<li>
<code>component.linkAll()</code> works similar to <code>component.state.linkAll()</code>.</li>
</ul>
<h3 id="page_collection.linkContains%28+record+%29">collection.linkContains( record )</h3>
<p>Create the boolean link which is <code>true</code> whenever the record is contained in the collection.</p>
<p>Setting the link to <code>false</code> will remove record from the collection, setting it to true will add it.</p>
<h3 id="page_Link.value%28+value%2C+set+%29">Link.value( value, set )</h3>
<p>Create custom link with the given <code>value</code> and <code>set</code> function. Use the <code>link.check</code> method to populate the validation error.</p>
<h2 id="page_Links+transformations">Links transformations</h2>
<h3 id="page_link.equals%28+value+%29">link.equals( value )</h3>
<pre><code class="language-javascript">&lt;Checkbox checkedLink={ stringLink.equals( 'optionX' ) } /&gt;
&lt;Checkbox checkedLink={ stringLink.equals( 'optionY' ) } /&gt;
</code></pre>
<p>Create boolean equality link which value is <code>true</code> whenever <code>link.value === value</code>, and <code>false</code> otherwise.</p>
<p>When an equality link is assigned with <code>true</code> the parent link value is set with <code>value</code>, and with <code>null</code> otherwise.</p>
<p>Useful for radio groups.</p>
<h3 id="page_link.props">link.props</h3>
<pre><code class="language-javascript">&lt;input type=&quot;text&quot; {...nameLink.props} /&gt;
</code></pre>
<p>Converts the link to the standard <code>{ value, onChange }</code> props to be easily consumed by standard <code>&lt;input /&gt;</code> control.</p>
<h3 id="page_link.action%28+%28+prevValue%2C+event+%29+%3D%3E+newValue+%29">link.action( ( prevValue, event ) =&gt; newValue )</h3>
<pre><code class="language-javascript">// simple click event handler...
&lt;button onClick={ boolLink.action( x =&gt; !x ) } /&gt;

// manual binding to input control:
const setValue = ( x, e ) =&gt; e.target.value;
...
&lt;input  value={ link.value }
        onChange={ link.action( setValue ) } /&gt;
</code></pre>
<p>Convert the link to the UI event handler <code>event =&gt; void</code> which will transform the link using the given function.</p>
<p><code>link.action</code> takes transform function, and produce a new function which takes single <code>event</code> argument.
When it's called, <code>event</code> and link <code>value</code> are passes as transform parameters, and link will be updated
with returned value.</p>
<p>This is particularly useful in (but not restricted to) UI event handlers.</p>
<h3 id="page_link.check%28+predicate+%3A+value+%3D%3E+boolean%2C+errorMsg%3F+%29">link.check( predicate : value =&gt; boolean, errorMsg? )</h3>
<p>Checks whenever the predicate is truthy on linked value, and if it's not, assigns <code>link.error</code> with <code>errorMsg</code>.
Does nothing if <code>link.error</code> is already populated.</p>
<p>This method may be used for additional validation in <code>render()</code>, and to populate the validation error for the custom links created with <code>Link.value()</code>.</p>
<p>You typically don't need <code>link.check</code> for links created with <code>linkAt()</code> methods, because the validation happens inside of records.</p>
<h2 id="page_Links+to+objects+and+arrays">Links to objects and arrays</h2>
<p>It's rather unusual scenario that you hold complex raw JS data as a part of your state, because typically the state is
defined as a superposition of nested records and collections.</p>
<p>Links can be used to make purely functional updates of the objects and arrays in records attributes. It's done with
the help of <em>at-links</em>, which points to the elements of linked objects and arrays.</p>
<h3 id="page_link.at%28+key+%29">link.at( key )</h3>
<pre><code class="language-javascript">// Update this.state.array[ 0 ].name
this.linkAt( 'array' ).at( 0 ).at( 'name' ).set( 'Joe' );
</code></pre>
<p>Create an <em>at-link</em> to the member of array or object.</p>
<p>Whenever an <em>at-link</em> is updated, it will lead to proper purely functional update (with shallow copying) of the
container (array or object).</p>
<h3 id="page_link.pick%28+key1%2C+key2%2C+...+%29">link.pick( key1, key2, ... )</h3>
<pre><code class="language-javascript">// Bulk create at-links for the linked object
const { name, email } = objLink.pick( 'name', 'email' );
</code></pre>
<p>Create <em>at-links</em> to the object's members with designated keys, and wrap them in an object.</p>
<h3 id="page_link.map%28+%28+itemLink%2C+itemKey+%29+%3D%3E+any+%7C+void+%29">link.map( ( itemLink, itemKey ) =&gt; any | void )</h3>
<pre><code class="language-javascript">// Render the linked array...
var list = stringArrayLink.map( ( itemLink, index ) =&gt; {
    if( itemLink.value ){ // Skip empty elements
        return (
            &lt;div key={ index }&gt;
                &lt;Input valueLink={ itemLink } /&gt;
            &lt;/div&gt;
        );
    }
});
</code></pre>
<p>Map and filter through the linked array or object to produce an array.
Mapping function receives <em>at-link</em> to the corresponding element.
Whenever it returns <code>undefined</code>, the corresponding element is be skipped.</p>
<h3 id="page_link.update%28+clonedObject+%3D%3E+modifiedObject+%29">link.update( clonedObject =&gt; modifiedObject )</h3>
<pre><code class="language-javascript">// Update the linked object
&lt;button onClick={ () =&gt; objLink.update( obj =&gt; {
                                obj.a = 1;
                                return obj;
                            }) } /&gt;
</code></pre>
<p>Update linked object or array.</p>
<p>Plain objects and arrays are shallow copied already, thus it's safe just to update the value in place.</p>
<h3 id="page_link.action%28+%28+clonedObject%2C+event+%29+%3D%3E+Object+%29">link.action( ( clonedObject, event ) =&gt; Object )</h3>
<p>Creates action to update enclosed object or array.</p>
<p>Plain objects and arrays are shallow copied already, thus it's safe just to update the value in place.</p>
<h3 id="page_link.removeAt%28+key+%29">link.removeAt( key )</h3>
<p>Remove element with a given key from the linked object or array.</p>
<h3 id="page_atLink.remove%28%29">atLink.remove()</h3>
<p>Remove element with a given key from the linked object or array.</p>
<h3 id="page_Array-specific+link+methods">Array-specific link methods</h3>
<p>Link to arrays proxies Array's <code>splice()</code>, <code>push()</code>, and <code>unshift()</code> methods.</p>
<p>They works in the same way and accepts the same parameters as corresponding Array methods,
but returns <code>undefined</code> and leads to the proper purely functional update of the parent object chain.</p>
<h4 id="page_"><code>linkToArray.contains( element ) : Link</code></h4>
<p>Creates the boolean link to the presence of value in array.</p>
<p>Resulting link value is <code>true</code> whenever element is present in array, and <code>false</code> otherwise.
Whenever resulting link is assigned with new value, it will flip <code>element</code> in the array.</p>
<p>Useful for the large checkbox groups.</p>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../../API_Reference/Component_API/Rendering.html">Previous</a></li>            <li class=Pager--next><a href="../../Data-bound controls.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="../../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../../'
                });
            });
        </script>
    
</body>
</html>
